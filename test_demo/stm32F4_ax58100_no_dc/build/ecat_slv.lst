ARM GAS  /tmp/ccXpFkMw.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"ecat_slv.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.section	.text.ESC_download_pre_objecthandler,"ax",%progbits
  20              		.align	1
  21              		.global	ESC_download_pre_objecthandler
  22              		.syntax unified
  23              		.thumb
  24              		.thumb_func
  26              	ESC_download_pre_objecthandler:
  27              	.LVL0:
  28              	.LFB0:
  29              		.file 1 "Lib/soes/src/ecat_slv.c"
   1:Lib/soes/src/ecat_slv.c **** /*
   2:Lib/soes/src/ecat_slv.c ****  * Licensed under the GNU General Public License version 2 with exceptions. See
   3:Lib/soes/src/ecat_slv.c ****  * LICENSE file in the project root for full license information
   4:Lib/soes/src/ecat_slv.c ****  */
   5:Lib/soes/src/ecat_slv.c **** #include <stddef.h>
   6:Lib/soes/src/ecat_slv.c **** #include "esc.h"
   7:Lib/soes/src/ecat_slv.c **** #include "esc_coe.h"
   8:Lib/soes/src/ecat_slv.c **** #include "esc_foe.h"
   9:Lib/soes/src/ecat_slv.c **** #include "esc_eoe.h"
  10:Lib/soes/src/ecat_slv.c **** #include "ecat_slv.h"
  11:Lib/soes/src/ecat_slv.c **** 
  12:Lib/soes/src/ecat_slv.c **** #define IS_RXPDO(index) ((index) >= 0x1600 && (index) < 0x1800)
  13:Lib/soes/src/ecat_slv.c **** #define IS_TXPDO(index) ((index) >= 0x1A00 && (index) < 0x1C00)
  14:Lib/soes/src/ecat_slv.c **** 
  15:Lib/soes/src/ecat_slv.c **** /* Global variables used by the stack */
  16:Lib/soes/src/ecat_slv.c **** uint8_t     MBX[MBXBUFFERS * MAX(MBXSIZE,MBXSIZEBOOT)];
  17:Lib/soes/src/ecat_slv.c **** _MBXcontrol MBXcontrol[MBXBUFFERS];
  18:Lib/soes/src/ecat_slv.c **** _SMmap      SMmap2[MAX_MAPPINGS_SM2];
  19:Lib/soes/src/ecat_slv.c **** _SMmap      SMmap3[MAX_MAPPINGS_SM3];
  20:Lib/soes/src/ecat_slv.c **** _ESCvar     ESCvar;
  21:Lib/soes/src/ecat_slv.c **** 
  22:Lib/soes/src/ecat_slv.c **** /* Private variables */
  23:Lib/soes/src/ecat_slv.c **** static volatile int watchdog;
  24:Lib/soes/src/ecat_slv.c **** 
  25:Lib/soes/src/ecat_slv.c **** #if MAX_MAPPINGS_SM2 > 0
  26:Lib/soes/src/ecat_slv.c **** static uint8_t rxpdo[MAX_RXPDO_SIZE] __attribute__((aligned (8)));
  27:Lib/soes/src/ecat_slv.c **** #else
  28:Lib/soes/src/ecat_slv.c **** extern uint8_t rxpdo[];
  29:Lib/soes/src/ecat_slv.c **** #endif
ARM GAS  /tmp/ccXpFkMw.s 			page 2


  30:Lib/soes/src/ecat_slv.c **** 
  31:Lib/soes/src/ecat_slv.c **** #if MAX_MAPPINGS_SM3 > 0
  32:Lib/soes/src/ecat_slv.c **** static uint8_t txpdo[MAX_TXPDO_SIZE] __attribute__((aligned (8)));
  33:Lib/soes/src/ecat_slv.c **** #else
  34:Lib/soes/src/ecat_slv.c **** extern uint8_t txpdo[];
  35:Lib/soes/src/ecat_slv.c **** #endif
  36:Lib/soes/src/ecat_slv.c **** 
  37:Lib/soes/src/ecat_slv.c **** /** Function to pre-qualify the incoming SDO download.
  38:Lib/soes/src/ecat_slv.c ****  *
  39:Lib/soes/src/ecat_slv.c ****  * @param[in] index      = index of SDO download request to check
  40:Lib/soes/src/ecat_slv.c ****  * @param[in] sub-index  = sub-index of SDO download request to check
  41:Lib/soes/src/ecat_slv.c ****  * @return SDO abort code, or 0 on success
  42:Lib/soes/src/ecat_slv.c ****  */
  43:Lib/soes/src/ecat_slv.c **** uint32_t ESC_download_pre_objecthandler (uint16_t index,
  44:Lib/soes/src/ecat_slv.c ****       uint8_t subindex,
  45:Lib/soes/src/ecat_slv.c ****       void * data,
  46:Lib/soes/src/ecat_slv.c ****       size_t size,
  47:Lib/soes/src/ecat_slv.c ****       uint16_t flags)
  48:Lib/soes/src/ecat_slv.c **** {
  30              		.loc 1 48 1 view -0
  31              		.cfi_startproc
  32              		@ args = 4, pretend = 0, frame = 0
  33              		@ frame_needed = 0, uses_anonymous_args = 0
  34              		.loc 1 48 1 is_stmt 0 view .LVU1
  35 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
  36              		.cfi_def_cfa_offset 28
  37              		.cfi_offset 4, -28
  38              		.cfi_offset 5, -24
  39              		.cfi_offset 6, -20
  40              		.cfi_offset 7, -16
  41              		.cfi_offset 8, -12
  42              		.cfi_offset 9, -8
  43              		.cfi_offset 14, -4
  44 0004 83B0     		sub	sp, sp, #12
  45              		.cfi_def_cfa_offset 40
  46 0006 0446     		mov	r4, r0
  47 0008 0D46     		mov	r5, r1
  48 000a 1646     		mov	r6, r2
  49 000c 1F46     		mov	r7, r3
  50 000e BDF82880 		ldrh	r8, [sp, #40]
  49:Lib/soes/src/ecat_slv.c ****    if (IS_RXPDO (index) ||
  51              		.loc 1 49 4 is_stmt 1 view .LVU2
  52              		.loc 1 49 8 is_stmt 0 view .LVU3
  53 0012 A0F5B051 		sub	r1, r0, #5632
  54              	.LVL1:
  55              		.loc 1 49 8 view .LVU4
  56 0016 89B2     		uxth	r1, r1
  57              		.loc 1 49 7 view .LVU5
  58 0018 B1F5007F 		cmp	r1, #512
  59 001c 0DD3     		bcc	.L2
  50:Lib/soes/src/ecat_slv.c ****        IS_TXPDO (index) ||
  60              		.loc 1 50 8 discriminator 1 view .LVU6
  61 001e A0F5D053 		sub	r3, r0, #6656
  62              	.LVL2:
  63              		.loc 1 50 8 discriminator 1 view .LVU7
  64 0022 9BB2     		uxth	r3, r3
  49:Lib/soes/src/ecat_slv.c ****    if (IS_RXPDO (index) ||
ARM GAS  /tmp/ccXpFkMw.s 			page 3


  65              		.loc 1 49 25 discriminator 1 view .LVU8
  66 0024 B3F5007F 		cmp	r3, #512
  67 0028 07D3     		bcc	.L2
  68              		.loc 1 50 25 view .LVU9
  69 002a 41F61243 		movw	r3, #7186
  70 002e 9842     		cmp	r0, r3
  71 0030 03D0     		beq	.L2
  51:Lib/soes/src/ecat_slv.c ****        index == RX_PDO_OBJIDX ||
  72              		.loc 1 51 31 view .LVU10
  73 0032 41F61343 		movw	r3, #7187
  74 0036 9842     		cmp	r0, r3
  75 0038 02D1     		bne	.L3
  76              	.L2:
  77              	.LBB2:
  52:Lib/soes/src/ecat_slv.c ****        index == TX_PDO_OBJIDX)
  53:Lib/soes/src/ecat_slv.c ****    {
  54:Lib/soes/src/ecat_slv.c ****       uint8_t minSub = ((flags & COMPLETE_ACCESS_FLAG) == 0) ? 0 : 1;
  78              		.loc 1 54 7 is_stmt 1 view .LVU11
  79              	.LVL3:
  55:Lib/soes/src/ecat_slv.c ****       if (subindex > minSub && COE_maxSub (index) != 0)
  80              		.loc 1 55 7 view .LVU12
  81              		.loc 1 55 10 is_stmt 0 view .LVU13
  82 003a B5EBD83F 		cmp	r5, r8, lsr #15
  83 003e 0FD8     		bhi	.L8
  84              	.LVL4:
  85              	.L3:
  86              		.loc 1 55 10 view .LVU14
  87              	.LBE2:
  56:Lib/soes/src/ecat_slv.c ****       {
  57:Lib/soes/src/ecat_slv.c ****          return ABORT_SUBINDEX0_NOT_ZERO;
  58:Lib/soes/src/ecat_slv.c ****       }
  59:Lib/soes/src/ecat_slv.c ****    }
  60:Lib/soes/src/ecat_slv.c **** 
  61:Lib/soes/src/ecat_slv.c ****    if (ESCvar.pre_object_download_hook)
  88              		.loc 1 61 4 is_stmt 1 view .LVU15
  89              		.loc 1 61 14 is_stmt 0 view .LVU16
  90 0040 0C4B     		ldr	r3, .L9
  91 0042 D3F83C90 		ldr	r9, [r3, #60]
  92              		.loc 1 61 7 view .LVU17
  93 0046 B9F1000F 		cmp	r9, #0
  94 004a 10D0     		beq	.L6
  62:Lib/soes/src/ecat_slv.c ****    {
  63:Lib/soes/src/ecat_slv.c ****       return (ESCvar.pre_object_download_hook) (index,
  95              		.loc 1 63 7 is_stmt 1 view .LVU18
  96              		.loc 1 63 21 is_stmt 0 view .LVU19
  97 004c CDF80080 		str	r8, [sp]
  98 0050 3B46     		mov	r3, r7
  99 0052 3246     		mov	r2, r6
 100 0054 2946     		mov	r1, r5
 101 0056 2046     		mov	r0, r4
 102 0058 C847     		blx	r9
 103              	.LVL5:
 104              	.L1:
  64:Lib/soes/src/ecat_slv.c ****             subindex,
  65:Lib/soes/src/ecat_slv.c ****             data,
  66:Lib/soes/src/ecat_slv.c ****             size,
  67:Lib/soes/src/ecat_slv.c ****             flags);
ARM GAS  /tmp/ccXpFkMw.s 			page 4


  68:Lib/soes/src/ecat_slv.c ****    }
  69:Lib/soes/src/ecat_slv.c **** 
  70:Lib/soes/src/ecat_slv.c ****    return 0;
  71:Lib/soes/src/ecat_slv.c **** }
 105              		.loc 1 71 1 view .LVU20
 106 005a 03B0     		add	sp, sp, #12
 107              		.cfi_remember_state
 108              		.cfi_def_cfa_offset 28
 109              		@ sp needed
 110 005c BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 111              	.LVL6:
 112              	.L8:
 113              		.cfi_restore_state
 114              	.LBB3:
  55:Lib/soes/src/ecat_slv.c ****       {
 115              		.loc 1 55 32 discriminator 1 view .LVU21
 116 0060 2046     		mov	r0, r4
 117              	.LVL7:
  55:Lib/soes/src/ecat_slv.c ****       {
 118              		.loc 1 55 32 discriminator 1 view .LVU22
 119 0062 FFF7FEFF 		bl	COE_maxSub
 120              	.LVL8:
  55:Lib/soes/src/ecat_slv.c ****       {
 121              		.loc 1 55 29 discriminator 1 view .LVU23
 122 0066 0028     		cmp	r0, #0
 123 0068 EAD0     		beq	.L3
  57:Lib/soes/src/ecat_slv.c ****       }
 124              		.loc 1 57 17 view .LVU24
 125 006a 0348     		ldr	r0, .L9+4
 126 006c F5E7     		b	.L1
 127              	.LVL9:
 128              	.L6:
  57:Lib/soes/src/ecat_slv.c ****       }
 129              		.loc 1 57 17 view .LVU25
 130              	.LBE3:
  70:Lib/soes/src/ecat_slv.c **** }
 131              		.loc 1 70 11 view .LVU26
 132 006e 0020     		movs	r0, #0
 133 0070 F3E7     		b	.L1
 134              	.L10:
 135 0072 00BF     		.align	2
 136              	.L9:
 137 0074 00000000 		.word	.LANCHOR0
 138 0078 03000106 		.word	100728835
 139              		.cfi_endproc
 140              	.LFE0:
 142              		.section	.text.ESC_download_post_objecthandler,"ax",%progbits
 143              		.align	1
 144              		.global	ESC_download_post_objecthandler
 145              		.syntax unified
 146              		.thumb
 147              		.thumb_func
 149              	ESC_download_post_objecthandler:
 150              	.LVL10:
 151              	.LFB1:
  72:Lib/soes/src/ecat_slv.c **** 
  73:Lib/soes/src/ecat_slv.c **** /** Hook called from the slave stack SDO Download handler to act on
ARM GAS  /tmp/ccXpFkMw.s 			page 5


  74:Lib/soes/src/ecat_slv.c ****  * user specified Index and Sub-index.
  75:Lib/soes/src/ecat_slv.c ****  *
  76:Lib/soes/src/ecat_slv.c ****  * @param[in] index      = index of SDO download request to handle
  77:Lib/soes/src/ecat_slv.c ****  * @param[in] sub-index  = sub-index of SDO download request to handle
  78:Lib/soes/src/ecat_slv.c ****  * @return SDO abort code, or 0 on success
  79:Lib/soes/src/ecat_slv.c ****  */
  80:Lib/soes/src/ecat_slv.c **** uint32_t ESC_download_post_objecthandler (uint16_t index, uint8_t subindex, uint16_t flags)
  81:Lib/soes/src/ecat_slv.c **** {
 152              		.loc 1 81 1 is_stmt 1 view -0
 153              		.cfi_startproc
 154              		@ args = 0, pretend = 0, frame = 0
 155              		@ frame_needed = 0, uses_anonymous_args = 0
 156              		.loc 1 81 1 is_stmt 0 view .LVU28
 157 0000 08B5     		push	{r3, lr}
 158              		.cfi_def_cfa_offset 8
 159              		.cfi_offset 3, -8
 160              		.cfi_offset 14, -4
  82:Lib/soes/src/ecat_slv.c ****    if (ESCvar.post_object_download_hook != NULL)
 161              		.loc 1 82 4 is_stmt 1 view .LVU29
 162              		.loc 1 82 14 is_stmt 0 view .LVU30
 163 0002 034B     		ldr	r3, .L15
 164 0004 1B6C     		ldr	r3, [r3, #64]
 165              		.loc 1 82 7 view .LVU31
 166 0006 0BB1     		cbz	r3, .L13
  83:Lib/soes/src/ecat_slv.c ****    {
  84:Lib/soes/src/ecat_slv.c ****       return (ESCvar.post_object_download_hook)(index, subindex, flags);
 167              		.loc 1 84 7 is_stmt 1 view .LVU32
 168              		.loc 1 84 21 is_stmt 0 view .LVU33
 169 0008 9847     		blx	r3
 170              	.LVL11:
 171              	.L11:
  85:Lib/soes/src/ecat_slv.c ****    }
  86:Lib/soes/src/ecat_slv.c **** 
  87:Lib/soes/src/ecat_slv.c ****    return 0;
  88:Lib/soes/src/ecat_slv.c **** }
 172              		.loc 1 88 1 view .LVU34
 173 000a 08BD     		pop	{r3, pc}
 174              	.LVL12:
 175              	.L13:
  87:Lib/soes/src/ecat_slv.c **** }
 176              		.loc 1 87 11 view .LVU35
 177 000c 0020     		movs	r0, #0
 178              	.LVL13:
  87:Lib/soes/src/ecat_slv.c **** }
 179              		.loc 1 87 11 view .LVU36
 180 000e FCE7     		b	.L11
 181              	.L16:
 182              		.align	2
 183              	.L15:
 184 0010 00000000 		.word	.LANCHOR0
 185              		.cfi_endproc
 186              	.LFE1:
 188              		.section	.text.ESC_upload_pre_objecthandler,"ax",%progbits
 189              		.align	1
 190              		.global	ESC_upload_pre_objecthandler
 191              		.syntax unified
 192              		.thumb
ARM GAS  /tmp/ccXpFkMw.s 			page 6


 193              		.thumb_func
 195              	ESC_upload_pre_objecthandler:
 196              	.LVL14:
 197              	.LFB2:
  89:Lib/soes/src/ecat_slv.c **** 
  90:Lib/soes/src/ecat_slv.c **** /** Function to pre-qualify the incoming SDO upload.
  91:Lib/soes/src/ecat_slv.c ****  *
  92:Lib/soes/src/ecat_slv.c ****  * @param[in] index      = index of SDO upload request to handle
  93:Lib/soes/src/ecat_slv.c ****  * @param[in] sub-index  = sub-index of SDO upload request to handle
  94:Lib/soes/src/ecat_slv.c ****  * @return SDO abort code, or 0 on success
  95:Lib/soes/src/ecat_slv.c ****  */
  96:Lib/soes/src/ecat_slv.c **** uint32_t ESC_upload_pre_objecthandler (uint16_t index,
  97:Lib/soes/src/ecat_slv.c ****       uint8_t subindex,
  98:Lib/soes/src/ecat_slv.c ****       void * data,
  99:Lib/soes/src/ecat_slv.c ****       size_t *size,
 100:Lib/soes/src/ecat_slv.c ****       uint16_t flags)
 101:Lib/soes/src/ecat_slv.c **** {
 198              		.loc 1 101 1 is_stmt 1 view -0
 199              		.cfi_startproc
 200              		@ args = 4, pretend = 0, frame = 0
 201              		@ frame_needed = 0, uses_anonymous_args = 0
 202              		.loc 1 101 1 is_stmt 0 view .LVU38
 203 0000 30B5     		push	{r4, r5, lr}
 204              		.cfi_def_cfa_offset 12
 205              		.cfi_offset 4, -12
 206              		.cfi_offset 5, -8
 207              		.cfi_offset 14, -4
 208 0002 83B0     		sub	sp, sp, #12
 209              		.cfi_def_cfa_offset 24
 102:Lib/soes/src/ecat_slv.c ****    if (ESCvar.pre_object_upload_hook != NULL)
 210              		.loc 1 102 4 is_stmt 1 view .LVU39
 211              		.loc 1 102 14 is_stmt 0 view .LVU40
 212 0004 054C     		ldr	r4, .L21
 213 0006 646C     		ldr	r4, [r4, #68]
 214              		.loc 1 102 7 view .LVU41
 215 0008 2CB1     		cbz	r4, .L19
 103:Lib/soes/src/ecat_slv.c ****    {
 104:Lib/soes/src/ecat_slv.c ****       return (ESCvar.pre_object_upload_hook) (index,
 216              		.loc 1 104 7 is_stmt 1 view .LVU42
 217              		.loc 1 104 21 is_stmt 0 view .LVU43
 218 000a BDF81850 		ldrh	r5, [sp, #24]
 219 000e 0095     		str	r5, [sp]
 220 0010 A047     		blx	r4
 221              	.LVL15:
 222              	.L17:
 105:Lib/soes/src/ecat_slv.c ****             subindex,
 106:Lib/soes/src/ecat_slv.c ****             data,
 107:Lib/soes/src/ecat_slv.c ****             size,
 108:Lib/soes/src/ecat_slv.c ****             flags);
 109:Lib/soes/src/ecat_slv.c ****    }
 110:Lib/soes/src/ecat_slv.c **** 
 111:Lib/soes/src/ecat_slv.c ****    return 0;
 112:Lib/soes/src/ecat_slv.c **** }
 223              		.loc 1 112 1 view .LVU44
 224 0012 03B0     		add	sp, sp, #12
 225              		.cfi_remember_state
 226              		.cfi_def_cfa_offset 12
ARM GAS  /tmp/ccXpFkMw.s 			page 7


 227              		@ sp needed
 228 0014 30BD     		pop	{r4, r5, pc}
 229              	.LVL16:
 230              	.L19:
 231              		.cfi_restore_state
 111:Lib/soes/src/ecat_slv.c **** }
 232              		.loc 1 111 11 view .LVU45
 233 0016 0020     		movs	r0, #0
 234              	.LVL17:
 111:Lib/soes/src/ecat_slv.c **** }
 235              		.loc 1 111 11 view .LVU46
 236 0018 FBE7     		b	.L17
 237              	.L22:
 238 001a 00BF     		.align	2
 239              	.L21:
 240 001c 00000000 		.word	.LANCHOR0
 241              		.cfi_endproc
 242              	.LFE2:
 244              		.section	.text.ESC_upload_post_objecthandler,"ax",%progbits
 245              		.align	1
 246              		.global	ESC_upload_post_objecthandler
 247              		.syntax unified
 248              		.thumb
 249              		.thumb_func
 251              	ESC_upload_post_objecthandler:
 252              	.LVL18:
 253              	.LFB3:
 113:Lib/soes/src/ecat_slv.c **** 
 114:Lib/soes/src/ecat_slv.c **** /** Hook called from the slave stack SDO Upload handler to act on
 115:Lib/soes/src/ecat_slv.c ****  * user specified Index and Sub-index.
 116:Lib/soes/src/ecat_slv.c ****  *
 117:Lib/soes/src/ecat_slv.c ****  * @param[in] index      = index of SDO upload request to handle
 118:Lib/soes/src/ecat_slv.c ****  * @param[in] sub-index  = sub-index of SDO upload request to handle
 119:Lib/soes/src/ecat_slv.c ****  * @return SDO abort code, or 0 on success
 120:Lib/soes/src/ecat_slv.c ****  */
 121:Lib/soes/src/ecat_slv.c **** uint32_t ESC_upload_post_objecthandler (uint16_t index, uint8_t subindex, uint16_t flags)
 122:Lib/soes/src/ecat_slv.c **** {
 254              		.loc 1 122 1 is_stmt 1 view -0
 255              		.cfi_startproc
 256              		@ args = 0, pretend = 0, frame = 0
 257              		@ frame_needed = 0, uses_anonymous_args = 0
 258              		.loc 1 122 1 is_stmt 0 view .LVU48
 259 0000 08B5     		push	{r3, lr}
 260              		.cfi_def_cfa_offset 8
 261              		.cfi_offset 3, -8
 262              		.cfi_offset 14, -4
 123:Lib/soes/src/ecat_slv.c ****    if (ESCvar.post_object_upload_hook != NULL)
 263              		.loc 1 123 4 is_stmt 1 view .LVU49
 264              		.loc 1 123 14 is_stmt 0 view .LVU50
 265 0002 034B     		ldr	r3, .L27
 266 0004 9B6C     		ldr	r3, [r3, #72]
 267              		.loc 1 123 7 view .LVU51
 268 0006 0BB1     		cbz	r3, .L25
 124:Lib/soes/src/ecat_slv.c ****    {
 125:Lib/soes/src/ecat_slv.c ****       return (ESCvar.post_object_upload_hook)(index, subindex, flags);
 269              		.loc 1 125 7 is_stmt 1 view .LVU52
 270              		.loc 1 125 21 is_stmt 0 view .LVU53
ARM GAS  /tmp/ccXpFkMw.s 			page 8


 271 0008 9847     		blx	r3
 272              	.LVL19:
 273              	.L23:
 126:Lib/soes/src/ecat_slv.c ****    }
 127:Lib/soes/src/ecat_slv.c **** 
 128:Lib/soes/src/ecat_slv.c ****    return 0;
 129:Lib/soes/src/ecat_slv.c **** }
 274              		.loc 1 129 1 view .LVU54
 275 000a 08BD     		pop	{r3, pc}
 276              	.LVL20:
 277              	.L25:
 128:Lib/soes/src/ecat_slv.c **** }
 278              		.loc 1 128 11 view .LVU55
 279 000c 0020     		movs	r0, #0
 280              	.LVL21:
 128:Lib/soes/src/ecat_slv.c **** }
 281              		.loc 1 128 11 view .LVU56
 282 000e FCE7     		b	.L23
 283              	.L28:
 284              		.align	2
 285              	.L27:
 286 0010 00000000 		.word	.LANCHOR0
 287              		.cfi_endproc
 288              	.LFE3:
 290              		.section	.text.APP_safeoutput,"ax",%progbits
 291              		.align	1
 292              		.global	APP_safeoutput
 293              		.syntax unified
 294              		.thumb
 295              		.thumb_func
 297              	APP_safeoutput:
 298              	.LFB4:
 130:Lib/soes/src/ecat_slv.c **** 
 131:Lib/soes/src/ecat_slv.c **** /** Hook called from the slave stack ESC_stopoutputs to act on state changes
 132:Lib/soes/src/ecat_slv.c ****  * forcing us to stop outputs. Here we can set them to a safe state.
 133:Lib/soes/src/ecat_slv.c ****  */
 134:Lib/soes/src/ecat_slv.c **** void APP_safeoutput (void)
 135:Lib/soes/src/ecat_slv.c **** {
 299              		.loc 1 135 1 is_stmt 1 view -0
 300              		.cfi_startproc
 301              		@ args = 0, pretend = 0, frame = 0
 302              		@ frame_needed = 0, uses_anonymous_args = 0
 303 0000 08B5     		push	{r3, lr}
 304              		.cfi_def_cfa_offset 8
 305              		.cfi_offset 3, -8
 306              		.cfi_offset 14, -4
 136:Lib/soes/src/ecat_slv.c ****    DPRINT ("APP_safeoutput\n");
 307              		.loc 1 136 31 view .LVU58
 137:Lib/soes/src/ecat_slv.c **** 
 138:Lib/soes/src/ecat_slv.c ****    if(ESCvar.safeoutput_override != NULL)
 308              		.loc 1 138 4 view .LVU59
 309              		.loc 1 138 13 is_stmt 0 view .LVU60
 310 0002 024B     		ldr	r3, .L32
 311 0004 9B6B     		ldr	r3, [r3, #56]
 312              		.loc 1 138 6 view .LVU61
 313 0006 03B1     		cbz	r3, .L29
 139:Lib/soes/src/ecat_slv.c ****    {
ARM GAS  /tmp/ccXpFkMw.s 			page 9


 140:Lib/soes/src/ecat_slv.c ****       (ESCvar.safeoutput_override)();
 314              		.loc 1 140 7 is_stmt 1 view .LVU62
 315              		.loc 1 140 14 is_stmt 0 view .LVU63
 316 0008 9847     		blx	r3
 317              	.LVL22:
 318              	.L29:
 141:Lib/soes/src/ecat_slv.c ****    }
 142:Lib/soes/src/ecat_slv.c **** }
 319              		.loc 1 142 1 view .LVU64
 320 000a 08BD     		pop	{r3, pc}
 321              	.L33:
 322              		.align	2
 323              	.L32:
 324 000c 00000000 		.word	.LANCHOR0
 325              		.cfi_endproc
 326              	.LFE4:
 328              		.section	.text.TXPDO_update,"ax",%progbits
 329              		.align	1
 330              		.global	TXPDO_update
 331              		.syntax unified
 332              		.thumb
 333              		.thumb_func
 335              	TXPDO_update:
 336              	.LFB5:
 143:Lib/soes/src/ecat_slv.c **** 
 144:Lib/soes/src/ecat_slv.c **** /** Write local process data to Sync Manager 3, Master Inputs.
 145:Lib/soes/src/ecat_slv.c ****  */
 146:Lib/soes/src/ecat_slv.c **** void TXPDO_update (void)
 147:Lib/soes/src/ecat_slv.c **** {
 337              		.loc 1 147 1 is_stmt 1 view -0
 338              		.cfi_startproc
 339              		@ args = 0, pretend = 0, frame = 0
 340              		@ frame_needed = 0, uses_anonymous_args = 0
 341 0000 38B5     		push	{r3, r4, r5, lr}
 342              		.cfi_def_cfa_offset 16
 343              		.cfi_offset 3, -16
 344              		.cfi_offset 4, -12
 345              		.cfi_offset 5, -8
 346              		.cfi_offset 14, -4
 148:Lib/soes/src/ecat_slv.c ****    if(ESCvar.txpdo_override != NULL)
 347              		.loc 1 148 4 view .LVU66
 348              		.loc 1 148 13 is_stmt 0 view .LVU67
 349 0002 0A4B     		ldr	r3, .L38
 350 0004 1B6D     		ldr	r3, [r3, #80]
 351              		.loc 1 148 6 view .LVU68
 352 0006 0BB1     		cbz	r3, .L35
 149:Lib/soes/src/ecat_slv.c ****    {
 150:Lib/soes/src/ecat_slv.c ****       (ESCvar.txpdo_override)();
 353              		.loc 1 150 7 is_stmt 1 view .LVU69
 354              		.loc 1 150 14 is_stmt 0 view .LVU70
 355 0008 9847     		blx	r3
 356              	.LVL23:
 357              	.L34:
 151:Lib/soes/src/ecat_slv.c ****    }
 152:Lib/soes/src/ecat_slv.c ****    else
 153:Lib/soes/src/ecat_slv.c ****    {
 154:Lib/soes/src/ecat_slv.c ****       if (MAX_MAPPINGS_SM3 > 0)
ARM GAS  /tmp/ccXpFkMw.s 			page 10


 155:Lib/soes/src/ecat_slv.c ****       {
 156:Lib/soes/src/ecat_slv.c ****          COE_pdoPack (txpdo, ESCvar.sm3mappings, SMmap3);
 157:Lib/soes/src/ecat_slv.c ****       }
 158:Lib/soes/src/ecat_slv.c ****       ESC_write (ESC_SM3_sma, txpdo, ESCvar.ESC_SM3_sml);
 159:Lib/soes/src/ecat_slv.c ****    }
 160:Lib/soes/src/ecat_slv.c **** }
 358              		.loc 1 160 1 view .LVU71
 359 000a 38BD     		pop	{r3, r4, r5, pc}
 360              	.L35:
 154:Lib/soes/src/ecat_slv.c ****       {
 361              		.loc 1 154 7 is_stmt 1 view .LVU72
 156:Lib/soes/src/ecat_slv.c ****       }
 362              		.loc 1 156 10 view .LVU73
 363 000c 074D     		ldr	r5, .L38
 364 000e 084C     		ldr	r4, .L38+4
 365 0010 084A     		ldr	r2, .L38+8
 366 0012 D5F8B010 		ldr	r1, [r5, #176]
 367 0016 2046     		mov	r0, r4
 368 0018 FFF7FEFF 		bl	COE_pdoPack
 369              	.LVL24:
 158:Lib/soes/src/ecat_slv.c ****    }
 370              		.loc 1 158 7 view .LVU74
 371 001c B5F87A20 		ldrh	r2, [r5, #122]
 372 0020 2146     		mov	r1, r4
 373 0022 4FF4D050 		mov	r0, #6656
 374 0026 FFF7FEFF 		bl	ESC_write
 375              	.LVL25:
 376              		.loc 1 160 1 is_stmt 0 view .LVU75
 377 002a EEE7     		b	.L34
 378              	.L39:
 379              		.align	2
 380              	.L38:
 381 002c 00000000 		.word	.LANCHOR0
 382 0030 00000000 		.word	.LANCHOR2
 383 0034 00000000 		.word	.LANCHOR1
 384              		.cfi_endproc
 385              	.LFE5:
 387              		.section	.text.RXPDO_update,"ax",%progbits
 388              		.align	1
 389              		.global	RXPDO_update
 390              		.syntax unified
 391              		.thumb
 392              		.thumb_func
 394              	RXPDO_update:
 395              	.LFB6:
 161:Lib/soes/src/ecat_slv.c **** 
 162:Lib/soes/src/ecat_slv.c **** /** Read Sync Manager 2 to local process data, Master Outputs.
 163:Lib/soes/src/ecat_slv.c ****  */
 164:Lib/soes/src/ecat_slv.c **** void RXPDO_update (void)
 165:Lib/soes/src/ecat_slv.c **** {
 396              		.loc 1 165 1 is_stmt 1 view -0
 397              		.cfi_startproc
 398              		@ args = 0, pretend = 0, frame = 0
 399              		@ frame_needed = 0, uses_anonymous_args = 0
 400 0000 38B5     		push	{r3, r4, r5, lr}
 401              		.cfi_def_cfa_offset 16
 402              		.cfi_offset 3, -16
ARM GAS  /tmp/ccXpFkMw.s 			page 11


 403              		.cfi_offset 4, -12
 404              		.cfi_offset 5, -8
 405              		.cfi_offset 14, -4
 166:Lib/soes/src/ecat_slv.c ****    if(ESCvar.rxpdo_override != NULL)
 406              		.loc 1 166 4 view .LVU77
 407              		.loc 1 166 13 is_stmt 0 view .LVU78
 408 0002 0A4B     		ldr	r3, .L44
 409 0004 DB6C     		ldr	r3, [r3, #76]
 410              		.loc 1 166 6 view .LVU79
 411 0006 0BB1     		cbz	r3, .L41
 167:Lib/soes/src/ecat_slv.c ****    {
 168:Lib/soes/src/ecat_slv.c ****       (ESCvar.rxpdo_override)();
 412              		.loc 1 168 7 is_stmt 1 view .LVU80
 413              		.loc 1 168 14 is_stmt 0 view .LVU81
 414 0008 9847     		blx	r3
 415              	.LVL26:
 416              	.L40:
 169:Lib/soes/src/ecat_slv.c ****    }
 170:Lib/soes/src/ecat_slv.c ****    else
 171:Lib/soes/src/ecat_slv.c ****    {
 172:Lib/soes/src/ecat_slv.c ****       ESC_read (ESC_SM2_sma, rxpdo, ESCvar.ESC_SM2_sml);
 173:Lib/soes/src/ecat_slv.c ****       if (MAX_MAPPINGS_SM2 > 0)
 174:Lib/soes/src/ecat_slv.c ****       {
 175:Lib/soes/src/ecat_slv.c ****          COE_pdoUnpack (rxpdo, ESCvar.sm2mappings, SMmap2);
 176:Lib/soes/src/ecat_slv.c ****       }
 177:Lib/soes/src/ecat_slv.c ****    }
 178:Lib/soes/src/ecat_slv.c **** }
 417              		.loc 1 178 1 view .LVU82
 418 000a 38BD     		pop	{r3, r4, r5, pc}
 419              	.L41:
 172:Lib/soes/src/ecat_slv.c ****       if (MAX_MAPPINGS_SM2 > 0)
 420              		.loc 1 172 7 is_stmt 1 view .LVU83
 421 000c 074D     		ldr	r5, .L44
 422 000e 084C     		ldr	r4, .L44+4
 423 0010 B5F87820 		ldrh	r2, [r5, #120]
 424 0014 2146     		mov	r1, r4
 425 0016 4FF4B050 		mov	r0, #5632
 426 001a FFF7FEFF 		bl	ESC_read
 427              	.LVL27:
 173:Lib/soes/src/ecat_slv.c ****       {
 428              		.loc 1 173 7 view .LVU84
 175:Lib/soes/src/ecat_slv.c ****       }
 429              		.loc 1 175 10 view .LVU85
 430 001e 054A     		ldr	r2, .L44+8
 431 0020 D5F8AC10 		ldr	r1, [r5, #172]
 432 0024 2046     		mov	r0, r4
 433 0026 FFF7FEFF 		bl	COE_pdoUnpack
 434              	.LVL28:
 435              		.loc 1 178 1 is_stmt 0 view .LVU86
 436 002a EEE7     		b	.L40
 437              	.L45:
 438              		.align	2
 439              	.L44:
 440 002c 00000000 		.word	.LANCHOR0
 441 0030 00000000 		.word	.LANCHOR3
 442 0034 00000000 		.word	.LANCHOR4
 443              		.cfi_endproc
ARM GAS  /tmp/ccXpFkMw.s 			page 12


 444              	.LFE6:
 446              		.section	.text.APP_setwatchdog,"ax",%progbits
 447              		.align	1
 448              		.global	APP_setwatchdog
 449              		.syntax unified
 450              		.thumb
 451              		.thumb_func
 453              	APP_setwatchdog:
 454              	.LVL29:
 455              	.LFB7:
 179:Lib/soes/src/ecat_slv.c **** 
 180:Lib/soes/src/ecat_slv.c **** /* Set the watchdog count value, don't have any affect when using
 181:Lib/soes/src/ecat_slv.c ****  * HW watchdog 0x4xx
 182:Lib/soes/src/ecat_slv.c ****  *
 183:Lib/soes/src/ecat_slv.c ****  * @param[in] watchdogcnt  = new watchdog count value
 184:Lib/soes/src/ecat_slv.c ****  */
 185:Lib/soes/src/ecat_slv.c **** void APP_setwatchdog (int watchdogcnt)
 186:Lib/soes/src/ecat_slv.c **** {
 456              		.loc 1 186 1 is_stmt 1 view -0
 457              		.cfi_startproc
 458              		@ args = 0, pretend = 0, frame = 0
 459              		@ frame_needed = 0, uses_anonymous_args = 0
 460              		@ link register save eliminated.
 187:Lib/soes/src/ecat_slv.c ****    CC_ATOMIC_SET(ESCvar.watchdogcnt, watchdogcnt);
 461              		.loc 1 187 4 view .LVU88
 462 0000 BFF35B8F 		dmb	ish
 463 0004 024B     		ldr	r3, .L47
 464 0006 C3F8DC00 		str	r0, [r3, #220]
 465 000a BFF35B8F 		dmb	ish
 188:Lib/soes/src/ecat_slv.c **** }
 466              		.loc 1 188 1 is_stmt 0 view .LVU89
 467 000e 7047     		bx	lr
 468              	.L48:
 469              		.align	2
 470              	.L47:
 471 0010 00000000 		.word	.LANCHOR0
 472              		.cfi_endproc
 473              	.LFE7:
 475              		.section	.text.DIG_process,"ax",%progbits
 476              		.align	1
 477              		.global	DIG_process
 478              		.syntax unified
 479              		.thumb
 480              		.thumb_func
 482              	DIG_process:
 483              	.LVL30:
 484              	.LFB8:
 189:Lib/soes/src/ecat_slv.c **** 
 190:Lib/soes/src/ecat_slv.c **** /* Function to update local I/O, call read ethercat outputs, call
 191:Lib/soes/src/ecat_slv.c ****  * write ethercat inputs. Implement watch-dog counter to count-out if we have
 192:Lib/soes/src/ecat_slv.c ****  * made state change affecting the App.state.
 193:Lib/soes/src/ecat_slv.c ****  */
 194:Lib/soes/src/ecat_slv.c **** void DIG_process (uint8_t flags)
 195:Lib/soes/src/ecat_slv.c **** {
 485              		.loc 1 195 1 is_stmt 1 view -0
 486              		.cfi_startproc
 487              		@ args = 0, pretend = 0, frame = 0
ARM GAS  /tmp/ccXpFkMw.s 			page 13


 488              		@ frame_needed = 0, uses_anonymous_args = 0
 489              		.loc 1 195 1 is_stmt 0 view .LVU91
 490 0000 10B5     		push	{r4, lr}
 491              		.cfi_def_cfa_offset 8
 492              		.cfi_offset 4, -8
 493              		.cfi_offset 14, -4
 494 0002 0446     		mov	r4, r0
 196:Lib/soes/src/ecat_slv.c ****    /* Handle watchdog */
 197:Lib/soes/src/ecat_slv.c ****    if((flags & DIG_PROCESS_WD_FLAG) > 0)
 495              		.loc 1 197 4 is_stmt 1 view .LVU92
 496              		.loc 1 197 6 is_stmt 0 view .LVU93
 497 0004 10F0040F 		tst	r0, #4
 498 0008 0DD1     		bne	.L59
 499              	.LVL31:
 500              	.L50:
 198:Lib/soes/src/ecat_slv.c ****    {
 199:Lib/soes/src/ecat_slv.c ****       if (CC_ATOMIC_GET(watchdog) > 0)
 200:Lib/soes/src/ecat_slv.c ****       {
 201:Lib/soes/src/ecat_slv.c ****          CC_ATOMIC_SUB(watchdog, 1);
 202:Lib/soes/src/ecat_slv.c ****       }
 203:Lib/soes/src/ecat_slv.c **** 
 204:Lib/soes/src/ecat_slv.c ****       if ((CC_ATOMIC_GET(watchdog) <= 0) &&
 205:Lib/soes/src/ecat_slv.c ****           ((CC_ATOMIC_GET(ESCvar.App.state) & APPSTATE_OUTPUT) > 0) &&
 206:Lib/soes/src/ecat_slv.c ****            (ESCvar.ESC_SM2_sml > 0))
 207:Lib/soes/src/ecat_slv.c ****       {
 208:Lib/soes/src/ecat_slv.c ****          DPRINT("DIG_process watchdog expired\n");
 209:Lib/soes/src/ecat_slv.c ****          ESC_ALstatusgotoerror((ESCsafeop | ESCerror), ALERR_WATCHDOG);
 210:Lib/soes/src/ecat_slv.c ****       }
 211:Lib/soes/src/ecat_slv.c ****       else if(((CC_ATOMIC_GET(ESCvar.App.state) & APPSTATE_OUTPUT) == 0))
 212:Lib/soes/src/ecat_slv.c ****       {
 213:Lib/soes/src/ecat_slv.c ****          CC_ATOMIC_SET(watchdog, ESCvar.watchdogcnt);
 214:Lib/soes/src/ecat_slv.c ****       }
 215:Lib/soes/src/ecat_slv.c ****    }
 216:Lib/soes/src/ecat_slv.c **** 
 217:Lib/soes/src/ecat_slv.c ****    /* Handle Outputs */
 218:Lib/soes/src/ecat_slv.c ****    if ((flags & DIG_PROCESS_OUTPUTS_FLAG) > 0)
 501              		.loc 1 218 4 is_stmt 1 view .LVU94
 502              		.loc 1 218 7 is_stmt 0 view .LVU95
 503 000a 14F0020F 		tst	r4, #2
 504 000e 4ED1     		bne	.L60
 505              	.L53:
 219:Lib/soes/src/ecat_slv.c ****    {
 220:Lib/soes/src/ecat_slv.c ****       if(((CC_ATOMIC_GET(ESCvar.App.state) & APPSTATE_OUTPUT) > 0) &&
 221:Lib/soes/src/ecat_slv.c ****          (ESCvar.ALevent & ESCREG_ALEVENT_SM2))
 222:Lib/soes/src/ecat_slv.c ****       {
 223:Lib/soes/src/ecat_slv.c ****          RXPDO_update();
 224:Lib/soes/src/ecat_slv.c ****          CC_ATOMIC_SET(watchdog, ESCvar.watchdogcnt);
 225:Lib/soes/src/ecat_slv.c ****          /* Set outputs */
 226:Lib/soes/src/ecat_slv.c ****          cb_set_outputs();
 227:Lib/soes/src/ecat_slv.c ****       }
 228:Lib/soes/src/ecat_slv.c ****       else if (ESCvar.ALevent & ESCREG_ALEVENT_SM2)
 229:Lib/soes/src/ecat_slv.c ****       {
 230:Lib/soes/src/ecat_slv.c ****          ESC_read (ESC_SM2_sma, rxpdo, ESCvar.ESC_SM2_sml);
 231:Lib/soes/src/ecat_slv.c ****       }
 232:Lib/soes/src/ecat_slv.c ****    }
 233:Lib/soes/src/ecat_slv.c **** 
 234:Lib/soes/src/ecat_slv.c ****    /* Call application */
ARM GAS  /tmp/ccXpFkMw.s 			page 14


 235:Lib/soes/src/ecat_slv.c ****    if ((flags & DIG_PROCESS_APP_HOOK_FLAG) > 0)
 506              		.loc 1 235 4 is_stmt 1 view .LVU96
 507              		.loc 1 235 7 is_stmt 0 view .LVU97
 508 0010 14F0080F 		tst	r4, #8
 509 0014 03D0     		beq	.L55
 236:Lib/soes/src/ecat_slv.c ****    {
 237:Lib/soes/src/ecat_slv.c ****       /* Call application callback if set */
 238:Lib/soes/src/ecat_slv.c ****       if (ESCvar.application_hook != NULL)
 510              		.loc 1 238 7 is_stmt 1 view .LVU98
 511              		.loc 1 238 17 is_stmt 0 view .LVU99
 512 0016 434B     		ldr	r3, .L64
 513 0018 5B6B     		ldr	r3, [r3, #52]
 514              		.loc 1 238 10 view .LVU100
 515 001a 03B1     		cbz	r3, .L55
 239:Lib/soes/src/ecat_slv.c ****       {
 240:Lib/soes/src/ecat_slv.c ****          (ESCvar.application_hook)();
 516              		.loc 1 240 10 is_stmt 1 view .LVU101
 517              		.loc 1 240 17 is_stmt 0 view .LVU102
 518 001c 9847     		blx	r3
 519              	.LVL32:
 520              	.L55:
 241:Lib/soes/src/ecat_slv.c ****       }
 242:Lib/soes/src/ecat_slv.c ****    }
 243:Lib/soes/src/ecat_slv.c **** 
 244:Lib/soes/src/ecat_slv.c ****    /* Handle Inputs */
 245:Lib/soes/src/ecat_slv.c ****    if ((flags & DIG_PROCESS_INPUTS_FLAG) > 0)
 521              		.loc 1 245 4 is_stmt 1 view .LVU103
 522              		.loc 1 245 7 is_stmt 0 view .LVU104
 523 001e 14F0010F 		tst	r4, #1
 524 0022 71D1     		bne	.L61
 525              	.L49:
 246:Lib/soes/src/ecat_slv.c ****    {
 247:Lib/soes/src/ecat_slv.c ****       if(CC_ATOMIC_GET(ESCvar.App.state) > 0)
 248:Lib/soes/src/ecat_slv.c ****       {
 249:Lib/soes/src/ecat_slv.c ****          /* Update inputs */
 250:Lib/soes/src/ecat_slv.c ****          cb_get_inputs();
 251:Lib/soes/src/ecat_slv.c ****          TXPDO_update();
 252:Lib/soes/src/ecat_slv.c ****       }
 253:Lib/soes/src/ecat_slv.c ****    }
 254:Lib/soes/src/ecat_slv.c **** }
 526              		.loc 1 254 1 view .LVU105
 527 0024 10BD     		pop	{r4, pc}
 528              	.LVL33:
 529              	.L59:
 199:Lib/soes/src/ecat_slv.c ****       {
 530              		.loc 1 199 7 is_stmt 1 view .LVU106
 199:Lib/soes/src/ecat_slv.c ****       {
 531              		.loc 1 199 11 is_stmt 0 view .LVU107
 532 0026 BFF35B8F 		dmb	ish
 533 002a 3F4B     		ldr	r3, .L64+4
 534 002c 1B68     		ldr	r3, [r3]
 535 002e BFF35B8F 		dmb	ish
 199:Lib/soes/src/ecat_slv.c ****       {
 536              		.loc 1 199 10 view .LVU108
 537 0032 002B     		cmp	r3, #0
 538 0034 0BDD     		ble	.L51
 201:Lib/soes/src/ecat_slv.c ****       }
ARM GAS  /tmp/ccXpFkMw.s 			page 15


 539              		.loc 1 201 10 is_stmt 1 view .LVU109
 540 0036 3C4B     		ldr	r3, .L64+4
 541 0038 BFF35B8F 		dmb	ish
 542              	.L57:
 543 003c 53E8002F 		ldrex	r2, [r3]
 544 0040 013A     		subs	r2, r2, #1
 545 0042 43E80021 		strex	r1, r2, [r3]
 546 0046 0029     		cmp	r1, #0
 547 0048 F8D1     		bne	.L57
 548 004a BFF35B8F 		dmb	ish
 549              	.L51:
 204:Lib/soes/src/ecat_slv.c ****           ((CC_ATOMIC_GET(ESCvar.App.state) & APPSTATE_OUTPUT) > 0) &&
 550              		.loc 1 204 7 view .LVU110
 204:Lib/soes/src/ecat_slv.c ****           ((CC_ATOMIC_GET(ESCvar.App.state) & APPSTATE_OUTPUT) > 0) &&
 551              		.loc 1 204 12 is_stmt 0 view .LVU111
 552 004e BFF35B8F 		dmb	ish
 553 0052 354B     		ldr	r3, .L64+4
 554 0054 1B68     		ldr	r3, [r3]
 555 0056 BFF35B8F 		dmb	ish
 204:Lib/soes/src/ecat_slv.c ****           ((CC_ATOMIC_GET(ESCvar.App.state) & APPSTATE_OUTPUT) > 0) &&
 556              		.loc 1 204 10 view .LVU112
 557 005a 002B     		cmp	r3, #0
 558 005c 13DD     		ble	.L62
 559              	.L52:
 211:Lib/soes/src/ecat_slv.c ****       {
 560              		.loc 1 211 12 is_stmt 1 view .LVU113
 211:Lib/soes/src/ecat_slv.c ****       {
 561              		.loc 1 211 17 is_stmt 0 view .LVU114
 562 005e BFF35B8F 		dmb	ish
 563 0062 304B     		ldr	r3, .L64
 564 0064 93F8E930 		ldrb	r3, [r3, #233]	@ zero_extendqisi2
 565 0068 BFF35B8F 		dmb	ish
 211:Lib/soes/src/ecat_slv.c ****       {
 566              		.loc 1 211 14 view .LVU115
 567 006c 13F0020F 		tst	r3, #2
 568 0070 CBD1     		bne	.L50
 213:Lib/soes/src/ecat_slv.c ****       }
 569              		.loc 1 213 10 is_stmt 1 view .LVU116
 570 0072 2C4B     		ldr	r3, .L64
 571 0074 D3F8DC20 		ldr	r2, [r3, #220]
 572 0078 BFF35B8F 		dmb	ish
 573 007c 2A4B     		ldr	r3, .L64+4
 574 007e 1A60     		str	r2, [r3]
 575 0080 BFF35B8F 		dmb	ish
 576 0084 C1E7     		b	.L50
 577              	.L62:
 205:Lib/soes/src/ecat_slv.c ****            (ESCvar.ESC_SM2_sml > 0))
 578              		.loc 1 205 13 is_stmt 0 discriminator 1 view .LVU117
 579 0086 BFF35B8F 		dmb	ish
 580 008a 264B     		ldr	r3, .L64
 581 008c 93F8E930 		ldrb	r3, [r3, #233]	@ zero_extendqisi2
 582 0090 BFF35B8F 		dmb	ish
 204:Lib/soes/src/ecat_slv.c ****           ((CC_ATOMIC_GET(ESCvar.App.state) & APPSTATE_OUTPUT) > 0) &&
 583              		.loc 1 204 42 discriminator 1 view .LVU118
 584 0094 13F0020F 		tst	r3, #2
 585 0098 E1D0     		beq	.L52
 206:Lib/soes/src/ecat_slv.c ****       {
ARM GAS  /tmp/ccXpFkMw.s 			page 16


 586              		.loc 1 206 19 view .LVU119
 587 009a 224B     		ldr	r3, .L64
 588 009c B3F87830 		ldrh	r3, [r3, #120]
 205:Lib/soes/src/ecat_slv.c ****            (ESCvar.ESC_SM2_sml > 0))
 589              		.loc 1 205 69 view .LVU120
 590 00a0 002B     		cmp	r3, #0
 591 00a2 DCD0     		beq	.L52
 208:Lib/soes/src/ecat_slv.c ****          ESC_ALstatusgotoerror((ESCsafeop | ESCerror), ALERR_WATCHDOG);
 592              		.loc 1 208 50 is_stmt 1 view .LVU121
 209:Lib/soes/src/ecat_slv.c ****       }
 593              		.loc 1 209 10 view .LVU122
 594 00a4 1B21     		movs	r1, #27
 595 00a6 1420     		movs	r0, #20
 596              	.LVL34:
 209:Lib/soes/src/ecat_slv.c ****       }
 597              		.loc 1 209 10 is_stmt 0 view .LVU123
 598 00a8 FFF7FEFF 		bl	ESC_ALstatusgotoerror
 599              	.LVL35:
 600 00ac ADE7     		b	.L50
 601              	.L60:
 220:Lib/soes/src/ecat_slv.c ****          (ESCvar.ALevent & ESCREG_ALEVENT_SM2))
 602              		.loc 1 220 7 is_stmt 1 view .LVU124
 220:Lib/soes/src/ecat_slv.c ****          (ESCvar.ALevent & ESCREG_ALEVENT_SM2))
 603              		.loc 1 220 12 is_stmt 0 view .LVU125
 604 00ae BFF35B8F 		dmb	ish
 605 00b2 1C4B     		ldr	r3, .L64
 606 00b4 93F8E930 		ldrb	r3, [r3, #233]	@ zero_extendqisi2
 607 00b8 BFF35B8F 		dmb	ish
 220:Lib/soes/src/ecat_slv.c ****          (ESCvar.ALevent & ESCREG_ALEVENT_SM2))
 608              		.loc 1 220 9 view .LVU126
 609 00bc 13F0020F 		tst	r3, #2
 610 00c0 05D0     		beq	.L54
 221:Lib/soes/src/ecat_slv.c ****       {
 611              		.loc 1 221 17 discriminator 1 view .LVU127
 612 00c2 184B     		ldr	r3, .L64
 613 00c4 D3F8E430 		ldr	r3, [r3, #228]
 220:Lib/soes/src/ecat_slv.c ****          (ESCvar.ALevent & ESCREG_ALEVENT_SM2))
 614              		.loc 1 220 68 discriminator 1 view .LVU128
 615 00c8 13F4806F 		tst	r3, #1024
 616 00cc 0ED1     		bne	.L63
 617              	.L54:
 228:Lib/soes/src/ecat_slv.c ****       {
 618              		.loc 1 228 12 is_stmt 1 view .LVU129
 228:Lib/soes/src/ecat_slv.c ****       {
 619              		.loc 1 228 22 is_stmt 0 view .LVU130
 620 00ce 154B     		ldr	r3, .L64
 621 00d0 D3F8E430 		ldr	r3, [r3, #228]
 228:Lib/soes/src/ecat_slv.c ****       {
 622              		.loc 1 228 15 view .LVU131
 623 00d4 13F4806F 		tst	r3, #1024
 624 00d8 9AD0     		beq	.L53
 230:Lib/soes/src/ecat_slv.c ****       }
 625              		.loc 1 230 10 is_stmt 1 view .LVU132
 626 00da 124B     		ldr	r3, .L64
 627 00dc B3F87820 		ldrh	r2, [r3, #120]
 628 00e0 1249     		ldr	r1, .L64+8
 629 00e2 4FF4B050 		mov	r0, #5632
ARM GAS  /tmp/ccXpFkMw.s 			page 17


 630 00e6 FFF7FEFF 		bl	ESC_read
 631              	.LVL36:
 632 00ea 91E7     		b	.L53
 633              	.L63:
 223:Lib/soes/src/ecat_slv.c ****          CC_ATOMIC_SET(watchdog, ESCvar.watchdogcnt);
 634              		.loc 1 223 10 view .LVU133
 635 00ec FFF7FEFF 		bl	RXPDO_update
 636              	.LVL37:
 224:Lib/soes/src/ecat_slv.c ****          /* Set outputs */
 637              		.loc 1 224 10 view .LVU134
 638 00f0 0C4B     		ldr	r3, .L64
 639 00f2 D3F8DC20 		ldr	r2, [r3, #220]
 640 00f6 BFF35B8F 		dmb	ish
 641 00fa 0B4B     		ldr	r3, .L64+4
 642 00fc 1A60     		str	r2, [r3]
 643 00fe BFF35B8F 		dmb	ish
 226:Lib/soes/src/ecat_slv.c ****       }
 644              		.loc 1 226 10 view .LVU135
 645 0102 FFF7FEFF 		bl	cb_set_outputs
 646              	.LVL38:
 647 0106 83E7     		b	.L53
 648              	.L61:
 247:Lib/soes/src/ecat_slv.c ****       {
 649              		.loc 1 247 7 view .LVU136
 247:Lib/soes/src/ecat_slv.c ****       {
 650              		.loc 1 247 10 is_stmt 0 view .LVU137
 651 0108 BFF35B8F 		dmb	ish
 652 010c 054B     		ldr	r3, .L64
 653 010e 93F8E930 		ldrb	r3, [r3, #233]	@ zero_extendqisi2
 654 0112 BFF35B8F 		dmb	ish
 247:Lib/soes/src/ecat_slv.c ****       {
 655              		.loc 1 247 9 view .LVU138
 656 0116 002B     		cmp	r3, #0
 657 0118 84D0     		beq	.L49
 250:Lib/soes/src/ecat_slv.c ****          TXPDO_update();
 658              		.loc 1 250 10 is_stmt 1 view .LVU139
 659 011a FFF7FEFF 		bl	cb_get_inputs
 660              	.LVL39:
 251:Lib/soes/src/ecat_slv.c ****       }
 661              		.loc 1 251 10 view .LVU140
 662 011e FFF7FEFF 		bl	TXPDO_update
 663              	.LVL40:
 664              		.loc 1 254 1 is_stmt 0 view .LVU141
 665 0122 7FE7     		b	.L49
 666              	.L65:
 667              		.align	2
 668              	.L64:
 669 0124 00000000 		.word	.LANCHOR0
 670 0128 00000000 		.word	.LANCHOR5
 671 012c 00000000 		.word	.LANCHOR3
 672              		.cfi_endproc
 673              	.LFE8:
 675              		.section	.text.ecat_slv_worker,"ax",%progbits
 676              		.align	1
 677              		.global	ecat_slv_worker
 678              		.syntax unified
 679              		.thumb
ARM GAS  /tmp/ccXpFkMw.s 			page 18


 680              		.thumb_func
 682              	ecat_slv_worker:
 683              	.LVL41:
 684              	.LFB9:
 255:Lib/soes/src/ecat_slv.c **** 
 256:Lib/soes/src/ecat_slv.c **** /*
 257:Lib/soes/src/ecat_slv.c ****  * Handler for SM change, SM0/1, AL CONTROL and EEPROM events, the application
 258:Lib/soes/src/ecat_slv.c ****  * control what interrupts that should be served and re-activated with
 259:Lib/soes/src/ecat_slv.c ****  * event mask argument
 260:Lib/soes/src/ecat_slv.c ****  */
 261:Lib/soes/src/ecat_slv.c **** void ecat_slv_worker (uint32_t event_mask)
 262:Lib/soes/src/ecat_slv.c **** {
 685              		.loc 1 262 1 is_stmt 1 view -0
 686              		.cfi_startproc
 687              		@ args = 0, pretend = 0, frame = 0
 688              		@ frame_needed = 0, uses_anonymous_args = 0
 689              		.loc 1 262 1 is_stmt 0 view .LVU143
 690 0000 10B5     		push	{r4, lr}
 691              		.cfi_def_cfa_offset 8
 692              		.cfi_offset 4, -8
 693              		.cfi_offset 14, -4
 694 0002 0446     		mov	r4, r0
 695 0004 1DE0     		b	.L70
 696              	.LVL42:
 697              	.L68:
 263:Lib/soes/src/ecat_slv.c ****    do
 264:Lib/soes/src/ecat_slv.c ****    {
 265:Lib/soes/src/ecat_slv.c ****       /* Check the state machine */
 266:Lib/soes/src/ecat_slv.c ****       ESC_state();
 267:Lib/soes/src/ecat_slv.c ****       /* Check the SM activation event */
 268:Lib/soes/src/ecat_slv.c ****       ESC_sm_act_event();
 269:Lib/soes/src/ecat_slv.c **** 
 270:Lib/soes/src/ecat_slv.c ****       /* Check mailboxes */
 271:Lib/soes/src/ecat_slv.c ****       while ((ESC_mbxprocess() > 0) || (ESCvar.txcue > 0))
 272:Lib/soes/src/ecat_slv.c ****       {
 273:Lib/soes/src/ecat_slv.c ****          ESC_coeprocess();
 698              		.loc 1 273 10 is_stmt 1 view .LVU144
 699 0006 FFF7FEFF 		bl	ESC_coeprocess
 700              	.LVL43:
 274:Lib/soes/src/ecat_slv.c **** #if USE_FOE
 275:Lib/soes/src/ecat_slv.c ****          ESC_foeprocess();
 276:Lib/soes/src/ecat_slv.c **** #endif
 277:Lib/soes/src/ecat_slv.c **** #if USE_EOE
 278:Lib/soes/src/ecat_slv.c ****          ESC_eoeprocess();
 279:Lib/soes/src/ecat_slv.c **** #endif
 280:Lib/soes/src/ecat_slv.c ****          ESC_xoeprocess();
 701              		.loc 1 280 10 view .LVU145
 702 000a FFF7FEFF 		bl	ESC_xoeprocess
 703              	.LVL44:
 704              	.L67:
 271:Lib/soes/src/ecat_slv.c ****       {
 705              		.loc 1 271 13 view .LVU146
 271:Lib/soes/src/ecat_slv.c ****       {
 706              		.loc 1 271 15 is_stmt 0 view .LVU147
 707 000e FFF7FEFF 		bl	ESC_mbxprocess
 708              	.LVL45:
 271:Lib/soes/src/ecat_slv.c ****       {
ARM GAS  /tmp/ccXpFkMw.s 			page 19


 709              		.loc 1 271 13 view .LVU148
 710 0012 0028     		cmp	r0, #0
 711 0014 F7D1     		bne	.L68
 271:Lib/soes/src/ecat_slv.c ****       {
 712              		.loc 1 271 47 discriminator 1 view .LVU149
 713 0016 104B     		ldr	r3, .L73
 714 0018 93F88F30 		ldrb	r3, [r3, #143]	@ zero_extendqisi2
 271:Lib/soes/src/ecat_slv.c ****       {
 715              		.loc 1 271 37 discriminator 1 view .LVU150
 716 001c 002B     		cmp	r3, #0
 717 001e F2D1     		bne	.L68
 281:Lib/soes/src/ecat_slv.c ****       }
 282:Lib/soes/src/ecat_slv.c **** #if USE_EOE
 283:Lib/soes/src/ecat_slv.c ****       ESC_eoeprocess_tx();
 284:Lib/soes/src/ecat_slv.c **** #endif
 285:Lib/soes/src/ecat_slv.c ****       /* Call emulated eeprom handler if set */
 286:Lib/soes/src/ecat_slv.c ****       if (ESCvar.esc_hw_eep_handler != NULL)
 718              		.loc 1 286 7 is_stmt 1 view .LVU151
 719              		.loc 1 286 17 is_stmt 0 view .LVU152
 720 0020 0D4B     		ldr	r3, .L73
 721 0022 DB6D     		ldr	r3, [r3, #92]
 722              		.loc 1 286 10 view .LVU153
 723 0024 03B1     		cbz	r3, .L69
 287:Lib/soes/src/ecat_slv.c ****       {
 288:Lib/soes/src/ecat_slv.c ****          (ESCvar.esc_hw_eep_handler)();
 724              		.loc 1 288 10 is_stmt 1 view .LVU154
 725              		.loc 1 288 17 is_stmt 0 view .LVU155
 726 0026 9847     		blx	r3
 727              	.LVL46:
 728              	.L69:
 289:Lib/soes/src/ecat_slv.c ****       }
 290:Lib/soes/src/ecat_slv.c **** 
 291:Lib/soes/src/ecat_slv.c ****       CC_ATOMIC_SET(ESCvar.ALevent, ESC_ALeventread());
 729              		.loc 1 291 7 is_stmt 1 view .LVU156
 730 0028 FFF7FEFF 		bl	ESC_ALeventread
 731              	.LVL47:
 732 002c 0A4B     		ldr	r3, .L73
 733 002e BFF35B8F 		dmb	ish
 734 0032 C3F8E400 		str	r0, [r3, #228]
 735 0036 BFF35B8F 		dmb	ish
 292:Lib/soes/src/ecat_slv.c **** 
 293:Lib/soes/src/ecat_slv.c ****    }while(ESCvar.ALevent & event_mask);
 736              		.loc 1 293 10 view .LVU157
 737              		.loc 1 293 17 is_stmt 0 view .LVU158
 738 003a D3F8E430 		ldr	r3, [r3, #228]
 739              		.loc 1 293 4 view .LVU159
 740 003e 2342     		tst	r3, r4
 741 0040 04D0     		beq	.L72
 742              	.L70:
 263:Lib/soes/src/ecat_slv.c ****    {
 743              		.loc 1 263 4 is_stmt 1 view .LVU160
 266:Lib/soes/src/ecat_slv.c ****       /* Check the SM activation event */
 744              		.loc 1 266 7 view .LVU161
 745 0042 FFF7FEFF 		bl	ESC_state
 746              	.LVL48:
 268:Lib/soes/src/ecat_slv.c **** 
 747              		.loc 1 268 7 view .LVU162
ARM GAS  /tmp/ccXpFkMw.s 			page 20


 748 0046 FFF7FEFF 		bl	ESC_sm_act_event
 749              	.LVL49:
 271:Lib/soes/src/ecat_slv.c ****       {
 750              		.loc 1 271 7 view .LVU163
 271:Lib/soes/src/ecat_slv.c ****       {
 751              		.loc 1 271 13 is_stmt 0 view .LVU164
 752 004a E0E7     		b	.L67
 753              	.L72:
 294:Lib/soes/src/ecat_slv.c **** 
 295:Lib/soes/src/ecat_slv.c ****    ESC_ALeventmaskwrite(ESC_ALeventmaskread() | event_mask);
 754              		.loc 1 295 4 is_stmt 1 view .LVU165
 755              		.loc 1 295 25 is_stmt 0 view .LVU166
 756 004c FFF7FEFF 		bl	ESC_ALeventmaskread
 757              	.LVL50:
 758              		.loc 1 295 4 view .LVU167
 759 0050 2043     		orrs	r0, r0, r4
 760 0052 FFF7FEFF 		bl	ESC_ALeventmaskwrite
 761              	.LVL51:
 296:Lib/soes/src/ecat_slv.c **** }
 762              		.loc 1 296 1 view .LVU168
 763 0056 10BD     		pop	{r4, pc}
 764              	.LVL52:
 765              	.L74:
 766              		.loc 1 296 1 view .LVU169
 767              		.align	2
 768              	.L73:
 769 0058 00000000 		.word	.LANCHOR0
 770              		.cfi_endproc
 771              	.LFE9:
 773              		.section	.text.ecat_slv_poll,"ax",%progbits
 774              		.align	1
 775              		.global	ecat_slv_poll
 776              		.syntax unified
 777              		.thumb
 778              		.thumb_func
 780              	ecat_slv_poll:
 781              	.LFB10:
 297:Lib/soes/src/ecat_slv.c **** 
 298:Lib/soes/src/ecat_slv.c **** /*
 299:Lib/soes/src/ecat_slv.c ****  * Polling function. It should be called periodically for an application 
 300:Lib/soes/src/ecat_slv.c ****  * when only SM2/DC interrupt is active.
 301:Lib/soes/src/ecat_slv.c ****  * Read and handle events for the EtherCAT state, status, mailbox and eeprom.
 302:Lib/soes/src/ecat_slv.c ****  */
 303:Lib/soes/src/ecat_slv.c **** void ecat_slv_poll (void)
 304:Lib/soes/src/ecat_slv.c **** {
 782              		.loc 1 304 1 is_stmt 1 view -0
 783              		.cfi_startproc
 784              		@ args = 0, pretend = 0, frame = 0
 785              		@ frame_needed = 0, uses_anonymous_args = 0
 786 0000 10B5     		push	{r4, lr}
 787              		.cfi_def_cfa_offset 8
 788              		.cfi_offset 4, -8
 789              		.cfi_offset 14, -4
 305:Lib/soes/src/ecat_slv.c ****    /* Read local time from ESC*/
 306:Lib/soes/src/ecat_slv.c ****    ESC_read (ESCREG_LOCALTIME, (void *) &ESCvar.Time, sizeof (ESCvar.Time));
 790              		.loc 1 306 4 view .LVU171
 791 0002 0E4C     		ldr	r4, .L80
ARM GAS  /tmp/ccXpFkMw.s 			page 21


 792 0004 0422     		movs	r2, #4
 793 0006 04F1E001 		add	r1, r4, #224
 794 000a 4FF41160 		mov	r0, #2320
 795 000e FFF7FEFF 		bl	ESC_read
 796              	.LVL53:
 307:Lib/soes/src/ecat_slv.c ****    ESCvar.Time = etohl (ESCvar.Time);
 797              		.loc 1 307 4 view .LVU172
 798              		.loc 1 307 18 is_stmt 0 view .LVU173
 799 0012 D4F8E030 		ldr	r3, [r4, #224]
 800              		.loc 1 307 16 view .LVU174
 801 0016 C4F8E030 		str	r3, [r4, #224]
 308:Lib/soes/src/ecat_slv.c **** 
 309:Lib/soes/src/ecat_slv.c ****    /* Check the state machine */
 310:Lib/soes/src/ecat_slv.c ****    ESC_state();
 802              		.loc 1 310 4 is_stmt 1 view .LVU175
 803 001a FFF7FEFF 		bl	ESC_state
 804              	.LVL54:
 311:Lib/soes/src/ecat_slv.c ****    /* Check the SM activation event */
 312:Lib/soes/src/ecat_slv.c ****    ESC_sm_act_event();
 805              		.loc 1 312 4 view .LVU176
 806 001e FFF7FEFF 		bl	ESC_sm_act_event
 807              	.LVL55:
 313:Lib/soes/src/ecat_slv.c **** 
 314:Lib/soes/src/ecat_slv.c ****    /* Check mailboxes */
 315:Lib/soes/src/ecat_slv.c ****    if (ESC_mbxprocess())
 808              		.loc 1 315 4 view .LVU177
 809              		.loc 1 315 8 is_stmt 0 view .LVU178
 810 0022 FFF7FEFF 		bl	ESC_mbxprocess
 811              	.LVL56:
 812              		.loc 1 315 7 view .LVU179
 813 0026 20B9     		cbnz	r0, .L79
 814              	.L76:
 316:Lib/soes/src/ecat_slv.c ****    {
 317:Lib/soes/src/ecat_slv.c ****       ESC_coeprocess();
 318:Lib/soes/src/ecat_slv.c **** #if USE_FOE
 319:Lib/soes/src/ecat_slv.c ****       ESC_foeprocess();
 320:Lib/soes/src/ecat_slv.c **** #endif
 321:Lib/soes/src/ecat_slv.c **** #if USE_EOE
 322:Lib/soes/src/ecat_slv.c ****       ESC_eoeprocess();
 323:Lib/soes/src/ecat_slv.c **** #endif
 324:Lib/soes/src/ecat_slv.c ****       ESC_xoeprocess();
 325:Lib/soes/src/ecat_slv.c ****    }
 326:Lib/soes/src/ecat_slv.c **** #if USE_EOE
 327:Lib/soes/src/ecat_slv.c ****    ESC_eoeprocess_tx();
 328:Lib/soes/src/ecat_slv.c **** #endif
 329:Lib/soes/src/ecat_slv.c **** 
 330:Lib/soes/src/ecat_slv.c ****    /* Call emulated eeprom handler if set */
 331:Lib/soes/src/ecat_slv.c ****    if (ESCvar.esc_hw_eep_handler != NULL)
 815              		.loc 1 331 4 is_stmt 1 view .LVU180
 816              		.loc 1 331 14 is_stmt 0 view .LVU181
 817 0028 044B     		ldr	r3, .L80
 818 002a DB6D     		ldr	r3, [r3, #92]
 819              		.loc 1 331 7 view .LVU182
 820 002c 03B1     		cbz	r3, .L75
 332:Lib/soes/src/ecat_slv.c ****    {
 333:Lib/soes/src/ecat_slv.c ****       (ESCvar.esc_hw_eep_handler)();
 821              		.loc 1 333 7 is_stmt 1 view .LVU183
ARM GAS  /tmp/ccXpFkMw.s 			page 22


 822              		.loc 1 333 14 is_stmt 0 view .LVU184
 823 002e 9847     		blx	r3
 824              	.LVL57:
 825              	.L75:
 334:Lib/soes/src/ecat_slv.c ****    }
 335:Lib/soes/src/ecat_slv.c **** }
 826              		.loc 1 335 1 view .LVU185
 827 0030 10BD     		pop	{r4, pc}
 828              	.L79:
 317:Lib/soes/src/ecat_slv.c **** #if USE_FOE
 829              		.loc 1 317 7 is_stmt 1 view .LVU186
 830 0032 FFF7FEFF 		bl	ESC_coeprocess
 831              	.LVL58:
 324:Lib/soes/src/ecat_slv.c ****    }
 832              		.loc 1 324 7 view .LVU187
 833 0036 FFF7FEFF 		bl	ESC_xoeprocess
 834              	.LVL59:
 835 003a F5E7     		b	.L76
 836              	.L81:
 837              		.align	2
 838              	.L80:
 839 003c 00000000 		.word	.LANCHOR0
 840              		.cfi_endproc
 841              	.LFE10:
 843              		.section	.text.ecat_slv,"ax",%progbits
 844              		.align	1
 845              		.global	ecat_slv
 846              		.syntax unified
 847              		.thumb
 848              		.thumb_func
 850              	ecat_slv:
 851              	.LFB11:
 336:Lib/soes/src/ecat_slv.c **** 
 337:Lib/soes/src/ecat_slv.c **** /*
 338:Lib/soes/src/ecat_slv.c ****  * Poll all events in a free-run application
 339:Lib/soes/src/ecat_slv.c ****  */
 340:Lib/soes/src/ecat_slv.c **** void ecat_slv (void)
 341:Lib/soes/src/ecat_slv.c **** {
 852              		.loc 1 341 1 view -0
 853              		.cfi_startproc
 854              		@ args = 0, pretend = 0, frame = 0
 855              		@ frame_needed = 0, uses_anonymous_args = 0
 856 0000 08B5     		push	{r3, lr}
 857              		.cfi_def_cfa_offset 8
 858              		.cfi_offset 3, -8
 859              		.cfi_offset 14, -4
 342:Lib/soes/src/ecat_slv.c ****    ecat_slv_poll();
 860              		.loc 1 342 4 view .LVU189
 861 0002 FFF7FEFF 		bl	ecat_slv_poll
 862              	.LVL60:
 343:Lib/soes/src/ecat_slv.c ****    DIG_process(DIG_PROCESS_WD_FLAG | DIG_PROCESS_OUTPUTS_FLAG |
 863              		.loc 1 343 4 view .LVU190
 864 0006 0F20     		movs	r0, #15
 865 0008 FFF7FEFF 		bl	DIG_process
 866              	.LVL61:
 344:Lib/soes/src/ecat_slv.c ****          DIG_PROCESS_APP_HOOK_FLAG | DIG_PROCESS_INPUTS_FLAG);
 345:Lib/soes/src/ecat_slv.c **** }
ARM GAS  /tmp/ccXpFkMw.s 			page 23


 867              		.loc 1 345 1 is_stmt 0 view .LVU191
 868 000c 08BD     		pop	{r3, pc}
 869              		.cfi_endproc
 870              	.LFE11:
 872              		.section	.text.ecat_slv_init,"ax",%progbits
 873              		.align	1
 874              		.global	ecat_slv_init
 875              		.syntax unified
 876              		.thumb
 877              		.thumb_func
 879              	ecat_slv_init:
 880              	.LVL62:
 881              	.LFB12:
 346:Lib/soes/src/ecat_slv.c **** 
 347:Lib/soes/src/ecat_slv.c **** /*
 348:Lib/soes/src/ecat_slv.c ****  * Initialize the slave stack.
 349:Lib/soes/src/ecat_slv.c ****  */
 350:Lib/soes/src/ecat_slv.c **** void ecat_slv_init (esc_cfg_t * config)
 351:Lib/soes/src/ecat_slv.c **** {
 882              		.loc 1 351 1 is_stmt 1 view -0
 883              		.cfi_startproc
 884              		@ args = 0, pretend = 0, frame = 0
 885              		@ frame_needed = 0, uses_anonymous_args = 0
 886              		.loc 1 351 1 is_stmt 0 view .LVU193
 887 0000 10B5     		push	{r4, lr}
 888              		.cfi_def_cfa_offset 8
 889              		.cfi_offset 4, -8
 890              		.cfi_offset 14, -4
 891 0002 0446     		mov	r4, r0
 352:Lib/soes/src/ecat_slv.c ****    DPRINT ("Slave stack init started\n");
 892              		.loc 1 352 41 is_stmt 1 view .LVU194
 353:Lib/soes/src/ecat_slv.c **** 
 354:Lib/soes/src/ecat_slv.c ****    /* Init watchdog */
 355:Lib/soes/src/ecat_slv.c ****    watchdog = config->watchdog_cnt;
 893              		.loc 1 355 4 view .LVU195
 894              		.loc 1 355 21 is_stmt 0 view .LVU196
 895 0004 8268     		ldr	r2, [r0, #8]
 896              		.loc 1 355 13 view .LVU197
 897 0006 114B     		ldr	r3, .L88
 898 0008 1A60     		str	r2, [r3]
 356:Lib/soes/src/ecat_slv.c **** 
 357:Lib/soes/src/ecat_slv.c ****    /* Call stack configuration */
 358:Lib/soes/src/ecat_slv.c ****    ESC_config (config);
 899              		.loc 1 358 4 is_stmt 1 view .LVU198
 900 000a FFF7FEFF 		bl	ESC_config
 901              	.LVL63:
 359:Lib/soes/src/ecat_slv.c ****    /* Call HW init */
 360:Lib/soes/src/ecat_slv.c ****    ESC_init (config);
 902              		.loc 1 360 4 view .LVU199
 903 000e 2046     		mov	r0, r4
 904 0010 FFF7FEFF 		bl	ESC_init
 905              	.LVL64:
 361:Lib/soes/src/ecat_slv.c **** 
 362:Lib/soes/src/ecat_slv.c ****    /*  wait until ESC is started up */
 363:Lib/soes/src/ecat_slv.c ****    while ((ESCvar.DLstatus & 0x0001) == 0)
 906              		.loc 1 363 4 view .LVU200
 907              		.loc 1 363 10 is_stmt 0 view .LVU201
ARM GAS  /tmp/ccXpFkMw.s 			page 24


 908 0014 05E0     		b	.L85
 909              	.L86:
 364:Lib/soes/src/ecat_slv.c ****    {
 365:Lib/soes/src/ecat_slv.c ****       ESC_read (ESCREG_DLSTATUS, (void *) &ESCvar.DLstatus,
 910              		.loc 1 365 7 is_stmt 1 view .LVU202
 911 0016 0222     		movs	r2, #2
 912 0018 0D49     		ldr	r1, .L88+4
 913 001a 4FF48870 		mov	r0, #272
 914 001e FFF7FEFF 		bl	ESC_read
 915              	.LVL65:
 366:Lib/soes/src/ecat_slv.c ****                 sizeof (ESCvar.DLstatus));
 367:Lib/soes/src/ecat_slv.c ****       ESCvar.DLstatus = etohs (ESCvar.DLstatus);
 916              		.loc 1 367 7 view .LVU203
 917              	.L85:
 363:Lib/soes/src/ecat_slv.c ****    {
 918              		.loc 1 363 10 view .LVU204
 363:Lib/soes/src/ecat_slv.c ****    {
 919              		.loc 1 363 18 is_stmt 0 view .LVU205
 920 0022 0C4B     		ldr	r3, .L88+8
 921 0024 B3F88630 		ldrh	r3, [r3, #134]
 363:Lib/soes/src/ecat_slv.c ****    {
 922              		.loc 1 363 10 view .LVU206
 923 0028 13F0010F 		tst	r3, #1
 924 002c F3D0     		beq	.L86
 368:Lib/soes/src/ecat_slv.c ****    }
 369:Lib/soes/src/ecat_slv.c **** 
 370:Lib/soes/src/ecat_slv.c **** #if USE_FOE
 371:Lib/soes/src/ecat_slv.c ****    /* Init FoE */
 372:Lib/soes/src/ecat_slv.c ****    FOE_init ();
 373:Lib/soes/src/ecat_slv.c **** #endif
 374:Lib/soes/src/ecat_slv.c **** 
 375:Lib/soes/src/ecat_slv.c **** #if USE_EOE
 376:Lib/soes/src/ecat_slv.c ****    /* Init EoE */
 377:Lib/soes/src/ecat_slv.c ****    EOE_init ();
 378:Lib/soes/src/ecat_slv.c **** #endif
 379:Lib/soes/src/ecat_slv.c **** 
 380:Lib/soes/src/ecat_slv.c ****    /* reset ESC to init state */
 381:Lib/soes/src/ecat_slv.c ****    ESC_ALstatus (ESCinit);
 925              		.loc 1 381 4 is_stmt 1 view .LVU207
 926 002e 0120     		movs	r0, #1
 927 0030 FFF7FEFF 		bl	ESC_ALstatus
 928              	.LVL66:
 382:Lib/soes/src/ecat_slv.c ****    ESC_ALerror (ALERR_NONE);
 929              		.loc 1 382 4 view .LVU208
 930 0034 0020     		movs	r0, #0
 931 0036 FFF7FEFF 		bl	ESC_ALerror
 932              	.LVL67:
 383:Lib/soes/src/ecat_slv.c ****    ESC_stopmbx ();
 933              		.loc 1 383 4 view .LVU209
 934 003a FFF7FEFF 		bl	ESC_stopmbx
 935              	.LVL68:
 384:Lib/soes/src/ecat_slv.c ****    ESC_stopinput ();
 936              		.loc 1 384 4 view .LVU210
 937 003e FFF7FEFF 		bl	ESC_stopinput
 938              	.LVL69:
 385:Lib/soes/src/ecat_slv.c ****    ESC_stopoutput ();
 939              		.loc 1 385 4 view .LVU211
ARM GAS  /tmp/ccXpFkMw.s 			page 25


 940 0042 FFF7FEFF 		bl	ESC_stopoutput
 941              	.LVL70:
 386:Lib/soes/src/ecat_slv.c ****    /* Init Object Dictionary default values */
 387:Lib/soes/src/ecat_slv.c ****    COE_initDefaultValues ();
 942              		.loc 1 387 4 view .LVU212
 943 0046 FFF7FEFF 		bl	COE_initDefaultValues
 944              	.LVL71:
 388:Lib/soes/src/ecat_slv.c **** }
 945              		.loc 1 388 1 is_stmt 0 view .LVU213
 946 004a 10BD     		pop	{r4, pc}
 947              	.LVL72:
 948              	.L89:
 949              		.loc 1 388 1 view .LVU214
 950              		.align	2
 951              	.L88:
 952 004c 00000000 		.word	.LANCHOR5
 953 0050 86000000 		.word	.LANCHOR0+134
 954 0054 00000000 		.word	.LANCHOR0
 955              		.cfi_endproc
 956              	.LFE12:
 958              		.global	ESCvar
 959              		.global	SMmap3
 960              		.global	SMmap2
 961              		.global	MBXcontrol
 962              		.global	MBX
 963              		.section	.bss.ESCvar,"aw",%nobits
 964              		.align	2
 965              		.set	.LANCHOR0,. + 0
 968              	ESCvar:
 969 0000 00000000 		.space	1772
 969      00000000 
 969      00000000 
 969      00000000 
 969      00000000 
 970              		.section	.bss.MBX,"aw",%nobits
 971              		.align	2
 974              	MBX:
 975 0000 00000000 		.space	1536
 975      00000000 
 975      00000000 
 975      00000000 
 975      00000000 
 976              		.section	.bss.MBXcontrol,"aw",%nobits
 977              		.align	2
 980              	MBXcontrol:
 981 0000 000000   		.space	3
 982              		.section	.bss.SMmap2,"aw",%nobits
 983              		.align	2
 984              		.set	.LANCHOR4,. + 0
 987              	SMmap2:
 988 0000 00000000 		.space	12
 988      00000000 
 988      00000000 
 989              		.section	.bss.SMmap3,"aw",%nobits
 990              		.align	2
 991              		.set	.LANCHOR1,. + 0
 994              	SMmap3:
ARM GAS  /tmp/ccXpFkMw.s 			page 26


 995 0000 00000000 		.space	12
 995      00000000 
 995      00000000 
 996              		.section	.bss.rxpdo,"aw",%nobits
 997              		.align	3
 998              		.set	.LANCHOR3,. + 0
 1001              	rxpdo:
 1002 0000 00000000 		.space	512
 1002      00000000 
 1002      00000000 
 1002      00000000 
 1002      00000000 
 1003              		.section	.bss.txpdo,"aw",%nobits
 1004              		.align	3
 1005              		.set	.LANCHOR2,. + 0
 1008              	txpdo:
 1009 0000 00000000 		.space	512
 1009      00000000 
 1009      00000000 
 1009      00000000 
 1009      00000000 
 1010              		.section	.bss.watchdog,"aw",%nobits
 1011              		.align	2
 1012              		.set	.LANCHOR5,. + 0
 1015              	watchdog:
 1016 0000 00000000 		.space	4
 1017              		.text
 1018              	.Letext0:
 1019              		.file 2 "/usr/share/gcc-arm-none-eabi-10.3-2021.10/lib/gcc/arm-none-eabi/10.3.1/include/stddef.h"
 1020              		.file 3 "/usr/share/gcc-arm-none-eabi-10.3-2021.10/arm-none-eabi/include/machine/_default_types.h"
 1021              		.file 4 "/usr/share/gcc-arm-none-eabi-10.3-2021.10/arm-none-eabi/include/sys/_stdint.h"
 1022              		.file 5 "Lib/soes/include/esc_coe.h"
 1023              		.file 6 "Lib/soes/include/esc.h"
 1024              		.file 7 "Lib/soes/include/ecat_slv.h"
ARM GAS  /tmp/ccXpFkMw.s 			page 27


DEFINED SYMBOLS
                            *ABS*:0000000000000000 ecat_slv.c
     /tmp/ccXpFkMw.s:20     .text.ESC_download_pre_objecthandler:0000000000000000 $t
     /tmp/ccXpFkMw.s:26     .text.ESC_download_pre_objecthandler:0000000000000000 ESC_download_pre_objecthandler
     /tmp/ccXpFkMw.s:137    .text.ESC_download_pre_objecthandler:0000000000000074 $d
     /tmp/ccXpFkMw.s:143    .text.ESC_download_post_objecthandler:0000000000000000 $t
     /tmp/ccXpFkMw.s:149    .text.ESC_download_post_objecthandler:0000000000000000 ESC_download_post_objecthandler
     /tmp/ccXpFkMw.s:184    .text.ESC_download_post_objecthandler:0000000000000010 $d
     /tmp/ccXpFkMw.s:189    .text.ESC_upload_pre_objecthandler:0000000000000000 $t
     /tmp/ccXpFkMw.s:195    .text.ESC_upload_pre_objecthandler:0000000000000000 ESC_upload_pre_objecthandler
     /tmp/ccXpFkMw.s:240    .text.ESC_upload_pre_objecthandler:000000000000001c $d
     /tmp/ccXpFkMw.s:245    .text.ESC_upload_post_objecthandler:0000000000000000 $t
     /tmp/ccXpFkMw.s:251    .text.ESC_upload_post_objecthandler:0000000000000000 ESC_upload_post_objecthandler
     /tmp/ccXpFkMw.s:286    .text.ESC_upload_post_objecthandler:0000000000000010 $d
     /tmp/ccXpFkMw.s:291    .text.APP_safeoutput:0000000000000000 $t
     /tmp/ccXpFkMw.s:297    .text.APP_safeoutput:0000000000000000 APP_safeoutput
     /tmp/ccXpFkMw.s:324    .text.APP_safeoutput:000000000000000c $d
     /tmp/ccXpFkMw.s:329    .text.TXPDO_update:0000000000000000 $t
     /tmp/ccXpFkMw.s:335    .text.TXPDO_update:0000000000000000 TXPDO_update
     /tmp/ccXpFkMw.s:381    .text.TXPDO_update:000000000000002c $d
     /tmp/ccXpFkMw.s:388    .text.RXPDO_update:0000000000000000 $t
     /tmp/ccXpFkMw.s:394    .text.RXPDO_update:0000000000000000 RXPDO_update
     /tmp/ccXpFkMw.s:440    .text.RXPDO_update:000000000000002c $d
     /tmp/ccXpFkMw.s:447    .text.APP_setwatchdog:0000000000000000 $t
     /tmp/ccXpFkMw.s:453    .text.APP_setwatchdog:0000000000000000 APP_setwatchdog
     /tmp/ccXpFkMw.s:471    .text.APP_setwatchdog:0000000000000010 $d
     /tmp/ccXpFkMw.s:476    .text.DIG_process:0000000000000000 $t
     /tmp/ccXpFkMw.s:482    .text.DIG_process:0000000000000000 DIG_process
     /tmp/ccXpFkMw.s:669    .text.DIG_process:0000000000000124 $d
     /tmp/ccXpFkMw.s:676    .text.ecat_slv_worker:0000000000000000 $t
     /tmp/ccXpFkMw.s:682    .text.ecat_slv_worker:0000000000000000 ecat_slv_worker
     /tmp/ccXpFkMw.s:769    .text.ecat_slv_worker:0000000000000058 $d
     /tmp/ccXpFkMw.s:774    .text.ecat_slv_poll:0000000000000000 $t
     /tmp/ccXpFkMw.s:780    .text.ecat_slv_poll:0000000000000000 ecat_slv_poll
     /tmp/ccXpFkMw.s:839    .text.ecat_slv_poll:000000000000003c $d
     /tmp/ccXpFkMw.s:844    .text.ecat_slv:0000000000000000 $t
     /tmp/ccXpFkMw.s:850    .text.ecat_slv:0000000000000000 ecat_slv
     /tmp/ccXpFkMw.s:873    .text.ecat_slv_init:0000000000000000 $t
     /tmp/ccXpFkMw.s:879    .text.ecat_slv_init:0000000000000000 ecat_slv_init
     /tmp/ccXpFkMw.s:952    .text.ecat_slv_init:000000000000004c $d
     /tmp/ccXpFkMw.s:968    .bss.ESCvar:0000000000000000 ESCvar
     /tmp/ccXpFkMw.s:994    .bss.SMmap3:0000000000000000 SMmap3
     /tmp/ccXpFkMw.s:987    .bss.SMmap2:0000000000000000 SMmap2
     /tmp/ccXpFkMw.s:980    .bss.MBXcontrol:0000000000000000 MBXcontrol
     /tmp/ccXpFkMw.s:974    .bss.MBX:0000000000000000 MBX
     /tmp/ccXpFkMw.s:964    .bss.ESCvar:0000000000000000 $d
     /tmp/ccXpFkMw.s:971    .bss.MBX:0000000000000000 $d
     /tmp/ccXpFkMw.s:977    .bss.MBXcontrol:0000000000000000 $d
     /tmp/ccXpFkMw.s:983    .bss.SMmap2:0000000000000000 $d
     /tmp/ccXpFkMw.s:990    .bss.SMmap3:0000000000000000 $d
     /tmp/ccXpFkMw.s:997    .bss.rxpdo:0000000000000000 $d
     /tmp/ccXpFkMw.s:1001   .bss.rxpdo:0000000000000000 rxpdo
     /tmp/ccXpFkMw.s:1004   .bss.txpdo:0000000000000000 $d
     /tmp/ccXpFkMw.s:1008   .bss.txpdo:0000000000000000 txpdo
     /tmp/ccXpFkMw.s:1011   .bss.watchdog:0000000000000000 $d
     /tmp/ccXpFkMw.s:1015   .bss.watchdog:0000000000000000 watchdog

ARM GAS  /tmp/ccXpFkMw.s 			page 28


UNDEFINED SYMBOLS
COE_maxSub
COE_pdoPack
ESC_write
ESC_read
COE_pdoUnpack
ESC_ALstatusgotoerror
cb_set_outputs
cb_get_inputs
ESC_coeprocess
ESC_xoeprocess
ESC_mbxprocess
ESC_ALeventread
ESC_state
ESC_sm_act_event
ESC_ALeventmaskread
ESC_ALeventmaskwrite
ESC_config
ESC_init
ESC_ALstatus
ESC_ALerror
ESC_stopmbx
ESC_stopinput
ESC_stopoutput
COE_initDefaultValues
